{"version":3,"sources":["commands/export.ts"],"names":["action","projectDir","options","outputPath","path","resolve","outputDir","fs","existsSync","CommandError","publicUrl","dev","UrlUtils","isHttps","validator","isURL","protocols","console","warn","target","Project","getDefaultTargetAsync","status","currentStatus","shouldStartOurOwn","packagerInfo","ProjectSettings","readPackagerInfoAsync","runningPackagerTarget","stopAsync","startedOurOwn","startOpts","reset","clear","nonPersistent","maxWorkers","startAsync","quiet","exportOptions","dumpAssetmap","dumpSourcemap","isDev","absoluteOutputDir","process","cwd","exportForAppHosting","assetUrl","mergeSrcDirs","mergeSrcUrl","length","tmpFolder","join","remove","ensureDir","downloadDecompressPromises","map","url","uniqFilename","basename","crypto","randomBytes","toString","tmpFileCompressed","tmpFolderUncompressed","download","decompress","push","Promise","all","mergeSrcDir","srcDirs","concat","mergeAppDistributions","uri","filename","response","method","responseType","data","pipe","createWriteStream","reject","on","err","src","dest","targz","error","collect","val","memo","program","command","description","option","asyncActionProjectDir"],"mappings":"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","file":"../../commands/export.js","sourceRoot":"/expo-cli@3.16.1/src"}