{"version":3,"sources":["commands/build/ios/IOSBuilder.ts"],"names":["IOSBuilder","BaseBuilder","run","validateProject","checkForBuildInProgress","options","type","prepareCredentials","publishedExpIds","ensureProjectIsPublished","publicUrl","checkStatusBeforeBuild","build","bundleIdentifier","manifest","sdkVersion","validateIcon","XDLError","utils","checkIfSdkIsSupported","PLATFORMS","IOS","getAppleCtx","appleCtx","apple","setup","authenticate","bestEffortAppleCtx","ctx","appleId","ensureAppleCtx","nonInteractive","parent","confirm","name","message","chalk","green","username","owner","user","experienceName","slug","context","Context","init","projectDir","clearAndRevokeCredentialsIfRequested","skipCredentialsCheck","produceCredentials","e","bold","red","credentials","ios","getAllCredentials","appCredentials","getAppCredentials","hasAppleCtx","ensureAppExists","enablePushNotifications","distCertFromParams","SetupIosDist","distributionCert","getDistCert","CommandError","pushKeyFromParams","SetupIosPush","provisioningProfileFromParams","teamId","SetupIosProvisioningProfile","distCert","projectMetadata","clearCredentials","clearDistCert","clearPushKey","clearPushCert","clearProvisioningProfile","shouldClearAnything","credsToClear","determineCredentialsToClear","shouldRevokeOnApple","revokeCredentials","RemoveIosDist","removeSpecific","pushKey","getPushKey","RemoveIosPush","provisioningProfile","getProvisioningProfile","RemoveProvisioningProfile","pushCert","getPushCert","deletePushCert","credsToClearAll","Boolean","undefined","ensureReleaseExists","platform","icon","err"],"mappings":"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","file":"../../../../commands/build/ios/IOSBuilder.js","sourceRoot":"/expo-cli@3.16.1/src"}